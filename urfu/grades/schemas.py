"""
Схемы Swagger для приложения grades (оценки)
"""
from drf_spectacular.utils import extend_schema


my_grades_schema = extend_schema(
    summary="Получить оценки текущего пользователя",
    description="""
    Эндпоинт для получения всех оценок текущего аутентифицированного студента.
    
    Возвращает оценки, сгруппированные по дисциплинам, с расчетом среднего балла
    по каждой дисциплине.
    
    **Структура ответа:**
    - Для каждой дисциплины возвращается:
      - Информация о предмете
      - Список всех оценок по этому предмету
      - Средний балл (average_score)
      - Общее количество оценок (total_grades)
    
    **Типы работ:**
    - homework - Домашняя работа
    - test - Тест
    - exam - Контрольная
    - quiz - Мини-тест
    - lab - Лабораторная
    - project - Проект
    - other - Другое
    
    **Требует аутентификации:** Да (токен в заголовке Authorization)
    """,
    responses={
        200: {
            'description': 'Список оценок, сгруппированных по дисциплинам',
            'examples': {
                'application/json': [
                    {
                        'subject': {
                            'id': '660e8400-e29b-41d4-a716-446655440001',
                            'title': 'Математический анализ',
                            'teacher': {
                                'id': '770e8400-e29b-41d4-a716-446655440002',
                                'full_name': 'Петров Петр Петрович'
                            }
                        },
                        'grades': [
                            {
                                'id': '990e8400-e29b-41d4-a716-446655440004',
                                'work_type': 'homework',
                                'topic': 'Пределы функций',
                                'value': 85,
                                'weight': 0.3,
                                'work_date': '2025-12-01',
                                'created_at': '2025-12-01T10:00:00Z'
                            },
                            {
                                'id': 'aa0e8400-e29b-41d4-a716-446655440005',
                                'work_type': 'exam',
                                'topic': 'Контрольная работа №1',
                                'value': 90,
                                'weight': 1.0,
                                'work_date': '2025-12-05',
                                'created_at': '2025-12-05T14:00:00Z'
                            }
                        ],
                        'average_score': 87.5,
                        'total_grades': 2
                    }
                ]
            }
        },
        401: {
            'description': 'Требуется аутентификация',
            'examples': {
                'application/json': {
                    'detail': 'Учетные данные не были предоставлены.'
                }
            }
        }
    },
    tags=['Оценки']
)

grades_list_schema = extend_schema(
    summary="Список всех оценок",
    description="""
    Получить список всех оценок в системе.
    Доступно только для аутентифицированных пользователей.
    """,
    tags=['Оценки']
)

